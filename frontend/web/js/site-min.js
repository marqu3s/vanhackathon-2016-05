function checkPlayer(){""===token?$("#divLogin").removeClass("hidden").addClass("animated fadeIn"):$("#divNewGameJoinGame").removeClass("hidden").addClass("animated fadeIn")}function subscribePlayer(e){socket.emit("subscribe","game"+e),socket.on("game"+e,function(e){var a=JSON.parse(e);console.log(a),startGame(a.idGame)}),console.log("Player subscribed to channel: game"+e)}function startGame(e){console.log("Starting game "+e),$("#divGameRoom").addClass("hidden").removeClass("animated slideInLeft"),$("#divGameBoard").load("/site/ajax-get-game-board",{idGame:e},function(){$(this).removeClass("hidden").addClass("animated fadeIn")})}function updateGameRoom(e){$("#divGameRoom").load("/site/ajax-update-game-room",{id:e},function(){$("#divGamesList").removeClass("animated slideInLeft fadeIn").addClass("hidden"),$(this).removeClass("hidden").addClass("animated slideInLeft")})}function createNewGame(){$.ajax({url:"/site/ajax-host-game",type:"post",dataType:"json",data:{secret_size:$("#secret_size").val()},success:function(e){$("#divGameSettings").addClass("hidden").removeClass("animated fadeIn"),subscribePlayer(e.id_game),updateGameRoom(e.id_game),console.log("Player "+token+" joinned game "+e.id_game)}})}function joinExistingGame(){$("#divGamesList").load("/site/ajax-games-list",function(){$(this).removeClass("slideInLeft fadeIn").removeClass("hidden").addClass("animated slideInLeft")}),$("#divGameRoom").addClass("hidden")}function joinThisGame(e){subscribePlayer(e),$.post("/site/ajax-join-game",{idGame:e},function(a){updateGameRoom(e)}),console.log("Player "+token+" joinned game "+e)}function setPlayerStatus(e,a,i){$.ajax({type:"post",url:"/site/ajax-set-player-status",data:{idGame:e,idPlayer:a,status:i},complete:function(a){updateGameRoom(e)}})}var socket=io.connect(websocketAddress);$(document).ready(function(){checkPlayer(),$("#btnHostGame").click(function(){$("#divGameSettings").removeClass("hidden").addClass("animated fadeIn")}),$("#btnCreateGame").click(function(){createNewGame()}),$("#btnJoinGame").click(function(){joinExistingGame()}),$("#divGamesList").on("click",".btn-join-game",function(){var e=$(this).data("id");joinThisGame(e)}),$("#divGameRoom").on("click",".btn-player-ready",function(){var e=$(this).data("idgame"),a=$(this).data("idplayer");setPlayerStatus(e,a,"ready")}),$("#login-form").submit(function(){var e=$(this);return $.ajax({url:e.attr("action"),type:"post",data:e.serialize(),success:function(){document.location.reload()}}),!1})});